{% extends "news/base.html"%}

{% block content %}
<div>
    <div id="showmain">
        {%csrf_token%}
        {% if articles %}
        {% for c in categories %}
        <div id=" {{c.name}}">
            <h2>{{c.name}}</h2>
            <br>
            {% for a in c.articles.all %}
            <div id="{{a.id}}">
                <h3>{{a.title}}</h3>
                <p>{{a.pub_Date}}</p>
                <p>{{a.body}}</p>
                <div id="{{a.id}}">
                    {%if loggedin%}
                    {%if user in a.likes.all %}
                    <a id="" class="likeArticle" name="like-button"> Unlike</a>
                    <a class="comment-button">Comment</a>
                    {%else%}
                    <a id="" class="likeArticle" name="like-button"> Like</a>
                    <a class="comment-button">Comment</a>
                    {%endif%}
                    {%else%}
                    {%endif%}
                    <div class="comments">
                        <h3>Comments:</h3>
                        {%if a.comments.exists %}
                        {%for com in a.comments.all%}

                        <p>{{com.author.username}} posted</p>
                        <p>{{com.text}}</p>

                        <div class="replies">
                            {%if com.replies.exists%}
                            {%for rep in com.replies.all %}
                            <p>{{rep.author.username}} replied</p>
                            <p>{{rep.text}}</p>
                            {%endfor%}
                            {%endif%}
                        </div>
                        <br />
                        {%endfor%}
                        {%endif%}


                    </div>

                </div>
                <br>
            </div>
            {% endfor %}
            <br>
        </div>
        {% endfor %}
        {% else %}
        <p>No articles are available.</p>
        {% endif %}

    </div>
</div>

    {% endblock %}

